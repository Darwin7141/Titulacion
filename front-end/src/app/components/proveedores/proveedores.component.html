<!-- proveedores.component.html -->
<div class="registro-panel">
  <div class="registro-panel-content">
    <!-- Título dinámico -->
    <h3>{{ esEdicion ? 'Editar Proveedor' : 'Agregar Proveedor' }}</h3>

    <!-- Un único submit → guardar() decide si crea o actualiza -->
    <form #provForm="ngForm"
          (ngSubmit)="esEdicion ? guardar() : agregar()"
          autocomplete="on">

      <div class="form-grid">

        <!-- Código del proveedor (solo visible en edición) -->
        <div class="form-group" *ngIf="esEdicion">
          <label for="codigo">Código</label>
          <input id="codigo" name="codigoproveedor" type="text"
                 [(ngModel)]="proveedor.codigoproveedor"
                 disabled>
        </div>

        <!-- Cédula / RUC -->
        <div class="form-group">
          <label>Documento</label>
          <div>
            <label>
              <input type="radio" name="tipoDoc" [(ngModel)]="tipoDoc" value="CEDULA"> Cédula
            </label>
            <label style="margin-left:12px;">
              <input type="radio" name="tipoDoc" [(ngModel)]="tipoDoc" value="RUC"> RUC
            </label>
          </div>
        </div>

        <!-- Cédula / RUC (mismo campo) -->
        <div class="form-group">
          <label for="ci">Cédula / RUC</label>
          <input id="ci" name="ci" type="text"
                 [(ngModel)]="proveedor.ci"
                 [maxlength]="tipoDoc === 'CEDULA' ? 10 : 13"
                 [placeholder]="tipoDoc === 'CEDULA' ? 'Ingrese la cédula' : 'Ingrese el RUC'"
                 (input)="soloNumeros($event)"
                 [attr.inputmode]="'numeric'"
                 [attr.pattern]="'[0-9]*'"
                 required
                 cdkFocusInitial>
        </div>

        <!-- Nombre / Razón Social -->
        <div class="form-group">
          <label for="nombre">Nombre / Razón Social</label>
          <input id="nombre" name="nombre" type="text"
                 [(ngModel)]="proveedor.nombre"
                 placeholder="Ingrese el nombre o razón social"
                 required>
        </div>

        <!-- Dirección -->
        <div class="form-group">
          <label for="direccion">Dirección</label>
          <input id="direccion" name="direccion" type="text"
                 [(ngModel)]="proveedor.direccion"
                 placeholder="Ingrese la dirección"
                 required>
        </div>

        <!-- Correo (bloqueado al editar) -->
        <div class="form-group">
          <label for="correo">Correo Electrónico</label>
          <input id="correo" name="e_mail" type="email"
                 [(ngModel)]="proveedor.e_mail"
                 placeholder="Ingrese el correo"
                 [disabled]="esEdicion"
                 required>
        </div>

        <!-- Teléfono -->
        <div class="form-group">
          <label for="telefono">Teléfono</label>
          <input id="telefono" name="telefono" type="tel"
                 [(ngModel)]="proveedor.telefono"
                 placeholder="Ingrese el teléfono"
                 required>
        </div>

      </div><!-- /form-grid -->

      <!-- Botones -->
      <div class="registro-buttons">
        <button type="button"
                class="btn-cancel"
                (click)="cancelar()">Cancelar</button>

        <button type="submit"
                class="btn-register"
                [disabled]="!provForm.valid">
          {{ esEdicion ? 'Guardar' : 'Registrar' }}
        </button>
      </div>

    </form>
  </div>
</div>
